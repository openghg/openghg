
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Developer API &#8212; OpenGHG 0+untagged.1.gb14c668.dirty documentation</title>
    
    <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/pydata-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
    <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/custom.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="User API" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">OpenGHG</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../features.html">
  Features
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../install.html">
  Installation instructions
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../tutorials/index.html">
  Tutorials
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../development/index_devel.html">
  Development
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="index.html">
  User API
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  Developer API
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#standardisation">
   Standardisation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#surface-measurements">
     Surface measurements
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#metadata-handling">
     Metadata handling
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#attributes">
       Attributes
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#metadata-sync">
       Metadata sync
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#storage">
   Storage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#base-class">
     Base class
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#datasource">
     Datasource
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#emissions">
     Emissions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#eulerianmodel">
     EulerianModel
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#metstore">
     METStore
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#footprints">
     Footprints
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#obssurface">
     ObsSurface
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dataclasses">
   Dataclasses
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#retrieval-functions">
   Retrieval functions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#searching">
     Searching
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#specific-retrieval">
     Specific retrieval
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#object-store">
   Object Store
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#utility-functions">
   Utility functions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exporting">
     Exporting
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hashing">
     Hashing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#string-manipulation">
     String manipulation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#time">
     Time
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#iteration">
     Iteration
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#site-checks">
     Site Checks
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cloud">
     Cloud
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#custom-data-types">
   Custom Data Types
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#errors">
     Errors
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#types">
     Types
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="developer-api">
<h1>Developer API<a class="headerlink" href="#developer-api" title="Permalink to this headline">¶</a></h1>
<p>The functions and methods documented in this section are the internal workings of the OpenGHG library. They are subject to change
without warning due to the early stages of development of the project.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Normal users should not use any of the functions shown here directly as they may be removed or their functionality may change.</p>
</div>
<section id="standardisation">
<h2>Standardisation<a class="headerlink" href="#standardisation" title="Permalink to this headline">¶</a></h2>
<section id="surface-measurements">
<h3>Surface measurements<a class="headerlink" href="#surface-measurements" title="Permalink to this headline">¶</a></h3>
<p>These functions take surface measurement data and standardise it for storage in the object store. They ensure the correct metadata and attributes
are recorded with the data, and that the data is <a class="reference external" href="https://cfconventions.org/">CF compliant</a>. They are called by the <code class="docutils literal notranslate"><span class="pre">ObsSurface</span></code> class.</p>
<dl class="simple">
<dt><a class="reference internal" href="api_standardise.html#openghg.standardise.surface.parse_aqmesh" title="openghg.standardise.surface.parse_aqmesh"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_aqmesh()</span></code></a></dt><dd><p>For processing data from the AQMesh network</p>
</dd>
<dt><a class="reference internal" href="api_standardise.html#openghg.standardise.surface.parse_beaco2n" title="openghg.standardise.surface.parse_beaco2n"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_beaco2n()</span></code></a></dt><dd><p>For processing data from the BEACO2N network</p>
</dd>
<dt><a class="reference internal" href="api_standardise.html#openghg.standardise.surface.parse_btt" title="openghg.standardise.surface.parse_btt"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_btt()</span></code></a></dt><dd><p>For processing data from the BT Tower site</p>
</dd>
<dt><a class="reference internal" href="api_standardise.html#openghg.standardise.surface.parse_cranfield" title="openghg.standardise.surface.parse_cranfield"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_cranfield()</span></code></a></dt><dd><p>For processing data from Cranfield</p>
</dd>
<dt><a class="reference internal" href="api_standardise.html#openghg.standardise.surface.parse_crds" title="openghg.standardise.surface.parse_crds"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_crds()</span></code></a></dt><dd><p>For processing data from CRDS (cavity ring-down spectroscopy) data from the DECC network.</p>
</dd>
<dt><a class="reference internal" href="api_standardise.html#openghg.standardise.surface.parse_eurocom" title="openghg.standardise.surface.parse_eurocom"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_eurocom()</span></code></a></dt><dd><p>For processing data from the EUROCOM network</p>
</dd>
<dt><a class="reference internal" href="api_standardise.html#openghg.standardise.surface.parse_gcwerks" title="openghg.standardise.surface.parse_gcwerks"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_gcwerks()</span></code></a></dt><dd><p>For processing data in the form expected by the GCWERKS package</p>
</dd>
<dt><a class="reference internal" href="api_standardise.html#openghg.standardise.surface.parse_noaa" title="openghg.standardise.surface.parse_noaa"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_noaa()</span></code></a></dt><dd><p>For processing data from the NOAA network</p>
</dd>
<dt><a class="reference internal" href="api_standardise.html#openghg.standardise.surface.parse_npl" title="openghg.standardise.surface.parse_npl"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_npl()</span></code></a></dt><dd><p>For processing data from NPL</p>
</dd>
<dt><a class="reference internal" href="api_standardise.html#openghg.standardise.surface.parse_tmb" title="openghg.standardise.surface.parse_tmb"><code class="xref py py-func docutils literal notranslate"><span class="pre">parse_tmb()</span></code></a></dt><dd><p>For processing data from the Thames Barrier site</p>
</dd>
</dl>
</section>
<section id="metadata-handling">
<h3>Metadata handling<a class="headerlink" href="#metadata-handling" title="Permalink to this headline">¶</a></h3>
<p>These handle the assignment and standardisation of meta`data`.</p>
<section id="attributes">
<h4>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h4>
<p>Ensuring the NetCDF created during standardisation has the correct attributes assigned to it.</p>
<dl class="simple">
<dt><a class="reference internal" href="api_standardise.html#openghg.standardise.meta.assign_attributes" title="openghg.standardise.meta.assign_attributes"><code class="xref py py-func docutils literal notranslate"><span class="pre">assign_attributes()</span></code></a></dt><dd><p>Assign attributes to a number of datasets.</p>
</dd>
<dt><a class="reference internal" href="api_standardise.html#openghg.standardise.meta.get_attributes" title="openghg.standardise.meta.get_attributes"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_attributes()</span></code></a></dt><dd><p>Assign attributes to a single dataset, called by the above.</p>
</dd>
</dl>
</section>
<section id="metadata-sync">
<h4>Metadata sync<a class="headerlink" href="#metadata-sync" title="Permalink to this headline">¶</a></h4>
<dl class="simple">
<dt><a class="reference internal" href="api_standardise.html#openghg.standardise.meta.surface_standardise" title="openghg.standardise.meta.surface_standardise"><code class="xref py py-func docutils literal notranslate"><span class="pre">surface_standardise()</span></code></a></dt><dd><p>Ensure the required metadata is shared between the metadata and attributes.</p>
</dd>
</dl>
</section>
</section>
</section>
<section id="storage">
<h2>Storage<a class="headerlink" href="#storage" title="Permalink to this headline">¶</a></h2>
<p>These functions and classes handle the lower level storage and retrieval of data from the object store.</p>
<section id="base-class">
<h3>Base class<a class="headerlink" href="#base-class" title="Permalink to this headline">¶</a></h3>
<p>This provides the functionality required by all data storage and processing classes, namely the saving, retrieval and loading
of data from the object store.</p>
<dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseStore</span></code></dt><dd><p>Base class which the other core processing modules inherit</p>
</dd>
</dl>
</section>
<section id="datasource">
<h3>Datasource<a class="headerlink" href="#datasource" title="Permalink to this headline">¶</a></h3>
<p>The Datasource is the smallest data provider within the OpenGHG topology. A Datasource represents a data provider such as an instrument
measuring a specific gas at a specific height at a specific site. For an instrument measuring three gas species at an inlet height of 100m
at a site we would have three Datasources.</p>
<dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">Datasource</span></code></dt><dd><p>Handles the storage of data, metadata and version information for measurements</p>
</dd>
</dl>
</section>
<section id="emissions">
<h3>Emissions<a class="headerlink" href="#emissions" title="Permalink to this headline">¶</a></h3>
<p>Handles the storage of emissions data.
<code class="xref py py-class docutils literal notranslate"><span class="pre">Emissions</span></code></p>
</section>
<section id="eulerianmodel">
<h3>EulerianModel<a class="headerlink" href="#eulerianmodel" title="Permalink to this headline">¶</a></h3>
<p>Handles the storage of Eulerian model data.</p>
<p><a class="reference internal" href="api_store.html#openghg.store.EulerianModel" title="openghg.store.EulerianModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">EulerianModel</span></code></a></p>
</section>
<section id="metstore">
<h3>METStore<a class="headerlink" href="#metstore" title="Permalink to this headline">¶</a></h3>
<p>Handles the storage of met data from the ECMWF data.</p>
<p><a class="reference internal" href="api_store.html#openghg.store.METStore" title="openghg.store.METStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">METStore</span></code></a></p>
</section>
<section id="footprints">
<h3>Footprints<a class="headerlink" href="#footprints" title="Permalink to this headline">¶</a></h3>
<p>Handles the storage of footprints / flux data.</p>
<p><a class="reference internal" href="api_store.html#openghg.store.Footprints" title="openghg.store.Footprints"><code class="xref py py-class docutils literal notranslate"><span class="pre">Footprints</span></code></a></p>
</section>
<section id="obssurface">
<h3>ObsSurface<a class="headerlink" href="#obssurface" title="Permalink to this headline">¶</a></h3>
<p>Handles the storage of surface measurement data.</p>
<p><a class="reference internal" href="api_store.html#openghg.store.ObsSurface" title="openghg.store.ObsSurface"><code class="xref py py-class docutils literal notranslate"><span class="pre">ObsSurface</span></code></a></p>
</section>
</section>
<section id="dataclasses">
<h2>Dataclasses<a class="headerlink" href="#dataclasses" title="Permalink to this headline">¶</a></h2>
<p>These dataclasses are used to facilitate the simple packaging and retrieval of data from the object store.</p>
<dl class="simple">
<dt><a class="reference internal" href="api_dataobjects.html#openghg.dataobjects._BaseData" title="openghg.dataobjects._BaseData"><code class="xref py py-class docutils literal notranslate"><span class="pre">_BaseData</span></code></a></dt><dd><p>The base class that (most of) the dataclasses inherit.</p>
</dd>
<dt><a class="reference internal" href="api_dataobjects.html#openghg.dataobjects.FluxData" title="openghg.dataobjects.FluxData"><code class="xref py py-class docutils literal notranslate"><span class="pre">FluxData</span></code></a></dt><dd><p>Stores flux data.</p>
</dd>
<dt><a class="reference internal" href="api_dataobjects.html#openghg.dataobjects.FootprintData" title="openghg.dataobjects.FootprintData"><code class="xref py py-class docutils literal notranslate"><span class="pre">FootprintData</span></code></a></dt><dd><p>Stores footprint data.</p>
</dd>
<dt><a class="reference internal" href="api_dataobjects.html#openghg.dataobjects.METData" title="openghg.dataobjects.METData"><code class="xref py py-class docutils literal notranslate"><span class="pre">METData</span></code></a></dt><dd><p>Stores meteorological data retrieved from the ECMWF / our local cache.</p>
</dd>
<dt><a class="reference internal" href="api_dataobjects.html#openghg.dataobjects.ObsData" title="openghg.dataobjects.ObsData"><code class="xref py py-class docutils literal notranslate"><span class="pre">ObsData</span></code></a></dt><dd><p>Stores data returned by search functions.</p>
</dd>
<dt><a class="reference internal" href="api_dataobjects.html#openghg.dataobjects.RankSources" title="openghg.dataobjects.RankSources"><code class="xref py py-class docutils literal notranslate"><span class="pre">RankSources</span></code></a></dt><dd><p>Handles the ranking of datasources.</p>
</dd>
<dt><a class="reference internal" href="api_dataobjects.html#openghg.dataobjects.SearchResults" title="openghg.dataobjects.SearchResults"><code class="xref py py-class docutils literal notranslate"><span class="pre">SearchResults</span></code></a></dt><dd><p>Makes the retrieval of data simple.</p>
</dd>
</dl>
</section>
<section id="retrieval-functions">
<h2>Retrieval functions<a class="headerlink" href="#retrieval-functions" title="Permalink to this headline">¶</a></h2>
<p>These handle the retrieval of data from the object store.</p>
<section id="searching">
<h3>Searching<a class="headerlink" href="#searching" title="Permalink to this headline">¶</a></h3>
<dl>
<dt><a class="reference internal" href="api_retrieve.html#openghg.retrieve.search" title="openghg.retrieve.search"><code class="xref py py-func docutils literal notranslate"><span class="pre">search()</span></code></a></dt><dd><p>Search for data in the object store, accepts any pair of keyword - argument pairs</p>
<p>Example usage:</p>
<blockquote>
<div><p>search(site=”bsd”, inlet=”50m”, species=”co2”, interesting_metadata=”special_units”)</p>
</div></blockquote>
</dd>
</dl>
</section>
<section id="specific-retrieval">
<h3>Specific retrieval<a class="headerlink" href="#specific-retrieval" title="Permalink to this headline">¶</a></h3>
<p>Handle the retrieval of specific data types, some functions may try to mirror the interface of functions in the Bristol ACRG
repository but should hopefully be useful to all users.</p>
<dl class="simple">
<dt><a class="reference internal" href="api_retrieve.html#openghg.retrieve.get_obs_surface" title="openghg.retrieve.get_obs_surface"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_obs_surface()</span></code></a></dt><dd><p>Get measurements from one site</p>
</dd>
<dt><a class="reference internal" href="api_retrieve.html#openghg.retrieve.get_flux" title="openghg.retrieve.get_flux"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_flux()</span></code></a></dt><dd><p>Reads in all flux files for the domain and species as an <code class="docutils literal notranslate"><span class="pre">xarray</span></code> Dataset</p>
</dd>
<dt><a class="reference internal" href="api_retrieve.html#openghg.retrieve.get_footprint" title="openghg.retrieve.get_footprint"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_footprint()</span></code></a></dt><dd><p>Gets footprints from one site</p>
</dd>
</dl>
</section>
</section>
<section id="object-store">
<h2>Object Store<a class="headerlink" href="#object-store" title="Permalink to this headline">¶</a></h2>
<p>These functions handle the storage of data in the object store, in JSON or binary format. Each object and piece of data in the
object store is stored at a specific <code class="docutils literal notranslate"><span class="pre">key</span></code>, which can be thought of as the address of the data. The data is stored
in a <code class="docutils literal notranslate"><span class="pre">bucket</span></code> which in the cloud is a section of the OpenGHG object store. Locally a <code class="docutils literal notranslate"><span class="pre">bucket</span></code> is just a normal
directory in the user’s filesystem specific by the <code class="docutils literal notranslate"><span class="pre">OPENGHG_PATH</span></code> environment variable.</p>
<dl class="simple">
<dt><a class="reference internal" href="api_objectstore.html#openghg.objectstore.delete_object" title="openghg.objectstore.delete_object"><code class="xref py py-func docutils literal notranslate"><span class="pre">delete_object()</span></code></a></dt><dd><p>Delete an object in the store</p>
</dd>
<dt><a class="reference internal" href="api_objectstore.html#openghg.objectstore.exists" title="openghg.objectstore.exists"><code class="xref py py-func docutils literal notranslate"><span class="pre">exists()</span></code></a></dt><dd><p>Check if an object exists at that key</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">get_abs_filepaths()</span></code></dt><dd><p>Get absolute filepaths for objects</p>
</dd>
<dt><a class="reference internal" href="api_objectstore.html#openghg.objectstore.get_bucket" title="openghg.objectstore.get_bucket"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_bucket()</span></code></a></dt><dd><p>Get path to bucket</p>
</dd>
<dt><a class="reference internal" href="api_objectstore.html#openghg.objectstore.get_local_bucket" title="openghg.objectstore.get_local_bucket"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_local_bucket()</span></code></a></dt><dd><p>Get path to local bucket</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">get_md5()</span></code></dt><dd><p>Get MD5 has of file</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">get_md5_bytes()</span></code></dt><dd><p>Get MD5 hash of passed bytes</p>
</dd>
<dt><a class="reference internal" href="api_objectstore.html#openghg.objectstore.get_object" title="openghg.objectstore.get_object"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_object()</span></code></a></dt><dd><p>Retrieve object from object store</p>
</dd>
<dt><a class="reference internal" href="api_objectstore.html#openghg.objectstore.get_object_from_json" title="openghg.objectstore.get_object_from_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_object_from_json()</span></code></a></dt><dd><p>Retrieve JSON object from object store</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">hash_files()</span></code></dt><dd><p>Get the MD5 hashes of the given files</p>
</dd>
<dt><a class="reference internal" href="api_objectstore.html#openghg.objectstore.set_object_from_file" title="openghg.objectstore.set_object_from_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_object_from_file()</span></code></a></dt><dd><p>Set an object in the object store</p>
</dd>
<dt><a class="reference internal" href="api_objectstore.html#openghg.objectstore.set_object_from_json" title="openghg.objectstore.set_object_from_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_object_from_json()</span></code></a></dt><dd><p>Create a JSON object in the object store</p>
</dd>
</dl>
</section>
<section id="utility-functions">
<h2>Utility functions<a class="headerlink" href="#utility-functions" title="Permalink to this headline">¶</a></h2>
<p>This module contains all the helper functions used throughout OpenGHG.</p>
<section id="exporting">
<h3>Exporting<a class="headerlink" href="#exporting" title="Permalink to this headline">¶</a></h3>
<p>These are used to export data to a format readable by the <a class="reference external" href="https://github.com/openghg/dashboard">OpenGHG data dashboard</a>.</p>
<dl class="simple">
<dt><a class="reference internal" href="api_util.html#openghg.util.to_dashboard" title="openghg.util.to_dashboard"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_dashboard()</span></code></a></dt><dd><p>Export timeseries data to JSON</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.to_dashboard_mobile" title="openghg.util.to_dashboard_mobile"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_dashboard_mobile()</span></code></a></dt><dd><p>Export mobile observations data to JSON</p>
</dd>
</dl>
</section>
<section id="hashing">
<h3>Hashing<a class="headerlink" href="#hashing" title="Permalink to this headline">¶</a></h3>
<p>These handle hashing of data (usually with SHA1)</p>
<dl class="simple">
<dt><a class="reference internal" href="api_util.html#openghg.util.hash_file" title="openghg.util.hash_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">hash_file()</span></code></a></dt><dd><p>Calculate the SHA1 hash of a file</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.hash_string" title="openghg.util.hash_string"><code class="xref py py-func docutils literal notranslate"><span class="pre">hash_string()</span></code></a></dt><dd><p>Calculate the SHA1 hash of a UTF-8 encoded string</p>
</dd>
</dl>
</section>
<section id="string-manipulation">
<h3>String manipulation<a class="headerlink" href="#string-manipulation" title="Permalink to this headline">¶</a></h3>
<p>String cleaning and formatting functions</p>
<dl class="simple">
<dt><a class="reference internal" href="api_util.html#openghg.util.clean_string" title="openghg.util.clean_string"><code class="xref py py-func docutils literal notranslate"><span class="pre">clean_string()</span></code></a></dt><dd><p>Return a lowercase cleaned string</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.to_lowercase" title="openghg.util.to_lowercase"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_lowercase()</span></code></a></dt><dd><p>Converts a string to lowercase</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.remove_punctuation" title="openghg.util.remove_punctuation"><code class="xref py py-func docutils literal notranslate"><span class="pre">remove_punctuation()</span></code></a></dt><dd><p>Removes punctuation from a string</p>
</dd>
</dl>
</section>
<section id="time">
<h3>Time<a class="headerlink" href="#time" title="Permalink to this headline">¶</a></h3>
<p>Helpers to deal with all things datetime.</p>
<dl class="simple">
<dt><a class="reference internal" href="api_util.html#openghg.util.timestamp_tzaware" title="openghg.util.timestamp_tzaware"><code class="xref py py-func docutils literal notranslate"><span class="pre">timestamp_tzaware()</span></code></a></dt><dd><p>Create a Timestamp with a UTC timezone</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.timestamp_now" title="openghg.util.timestamp_now"><code class="xref py py-func docutils literal notranslate"><span class="pre">timestamp_now()</span></code></a></dt><dd><p>Create a timezone aware timestamp for now</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.timestamp_epoch" title="openghg.util.timestamp_epoch"><code class="xref py py-func docutils literal notranslate"><span class="pre">timestamp_epoch()</span></code></a></dt><dd><p>Create a timezone aware timestamp for the UNIX epoch (1970-01-01)</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.daterange_from_str" title="openghg.util.daterange_from_str"><code class="xref py py-func docutils literal notranslate"><span class="pre">daterange_from_str()</span></code></a></dt><dd><p>Create a daterange from two timestamp strings</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.daterange_to_str" title="openghg.util.daterange_to_str"><code class="xref py py-func docutils literal notranslate"><span class="pre">daterange_to_str()</span></code></a></dt><dd><p>Convert a daterange to string</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.create_daterange_str" title="openghg.util.create_daterange_str"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_daterange_str()</span></code></a></dt><dd><p>Create a daterange string from two timestamps or strings</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.create_daterange" title="openghg.util.create_daterange"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_daterange()</span></code></a></dt><dd><p>Create a pandas DatetimeIndex from two timestamps</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.daterange_overlap" title="openghg.util.daterange_overlap"><code class="xref py py-func docutils literal notranslate"><span class="pre">daterange_overlap()</span></code></a></dt><dd><p>Check if two dateranges overlap</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.combine_dateranges" title="openghg.util.combine_dateranges"><code class="xref py py-func docutils literal notranslate"><span class="pre">combine_dateranges()</span></code></a></dt><dd><p>Combine a list of dateranges</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.split_daterange_str" title="openghg.util.split_daterange_str"><code class="xref py py-func docutils literal notranslate"><span class="pre">split_daterange_str()</span></code></a></dt><dd><p>Split a daterange string to the component start and end Timestamps</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.closest_daterange" title="openghg.util.closest_daterange"><code class="xref py py-func docutils literal notranslate"><span class="pre">closest_daterange()</span></code></a></dt><dd><p>Finds the closest daterange in a list of dateranges</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.valid_daterange" title="openghg.util.valid_daterange"><code class="xref py py-func docutils literal notranslate"><span class="pre">valid_daterange()</span></code></a></dt><dd><p>Check if the passed daterange is valid</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.find_daterange_gaps" title="openghg.util.find_daterange_gaps"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_daterange_gaps()</span></code></a></dt><dd><p>Find the gaps in a list of dateranges</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.trim_daterange" title="openghg.util.trim_daterange"><code class="xref py py-func docutils literal notranslate"><span class="pre">trim_daterange()</span></code></a></dt><dd><p>Removes overlapping dates from to_trim</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.split_encompassed_daterange" title="openghg.util.split_encompassed_daterange"><code class="xref py py-func docutils literal notranslate"><span class="pre">split_encompassed_daterange()</span></code></a></dt><dd><p>Checks if one of the passed dateranges contains the other, if so, then
split the larger daterange into three sections.</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.daterange_contains" title="openghg.util.daterange_contains"><code class="xref py py-func docutils literal notranslate"><span class="pre">daterange_contains()</span></code></a></dt><dd><p>Checks if one daterange contains another</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.sanitise_daterange" title="openghg.util.sanitise_daterange"><code class="xref py py-func docutils literal notranslate"><span class="pre">sanitise_daterange()</span></code></a></dt><dd><p>Make sure the daterange is correct and return tzaware daterange.</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.check_nan" title="openghg.util.check_nan"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_nan()</span></code></a></dt><dd><p>Check if the given value is NaN, is so return an NA string</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.check_date" title="openghg.util.check_date"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_date()</span></code></a></dt><dd><p>Check if the passed string is a valid date or not, if not returns NA</p>
</dd>
</dl>
</section>
<section id="iteration">
<h3>Iteration<a class="headerlink" href="#iteration" title="Permalink to this headline">¶</a></h3>
<p>Our own personal <code class="xref py py-obj docutils literal notranslate"><span class="pre">itertools</span></code></p>
<dl class="simple">
<dt><a class="reference internal" href="api_util.html#openghg.util.pairwise" title="openghg.util.pairwise"><code class="xref py py-func docutils literal notranslate"><span class="pre">pairwise()</span></code></a></dt><dd><p>Return a zip of an iterable where a is the iterable
and b is the iterable advanced one step.</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.unanimous" title="openghg.util.unanimous"><code class="xref py py-func docutils literal notranslate"><span class="pre">unanimous()</span></code></a></dt><dd><p>Checks that all values in an iterable object are the same</p>
</dd>
</dl>
</section>
<section id="site-checks">
<h3>Site Checks<a class="headerlink" href="#site-checks" title="Permalink to this headline">¶</a></h3>
<p>These perform checks to ensure data processed for each site is correct</p>
<dl class="simple">
<dt><a class="reference internal" href="api_util.html#openghg.util.verify_site" title="openghg.util.verify_site"><code class="xref py py-func docutils literal notranslate"><span class="pre">verify_site()</span></code></a></dt><dd><p>Verify that the given site is one we recognize, does fuzzy text matching to suggest a possible valid value.</p>
</dd>
<dt><a class="reference internal" href="api_util.html#openghg.util.multiple_inlets" title="openghg.util.multiple_inlets"><code class="xref py py-func docutils literal notranslate"><span class="pre">multiple_inlets()</span></code></a></dt><dd><p>Check if the passed site has more than one inlet</p>
</dd>
</dl>
</section>
<section id="cloud">
<h3>Cloud<a class="headerlink" href="#cloud" title="Permalink to this headline">¶</a></h3>
<p>These handle cloud based functionality</p>
<dl class="simple">
<dt><a class="reference internal" href="api_util.html#openghg.util.running_in_cloud" title="openghg.util.running_in_cloud"><code class="xref py py-func docutils literal notranslate"><span class="pre">running_in_cloud()</span></code></a></dt><dd><p>Checks if we’re running in the cloud by checking for the <code class="docutils literal notranslate"><span class="pre">OPENGHG_CLOUD</span></code> environment variable.</p>
</dd>
</dl>
</section>
</section>
<section id="custom-data-types">
<h2>Custom Data Types<a class="headerlink" href="#custom-data-types" title="Permalink to this headline">¶</a></h2>
<section id="errors">
<h3>Errors<a class="headerlink" href="#errors" title="Permalink to this headline">¶</a></h3>
<p>Customised errors for OpenGHG.</p>
<dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidSiteError</span></code></dt><dd><p>Raised if an invalid site is given</p>
</dd>
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">UnknownDataError</span></code></dt><dd><p>Raised if we don’t recognize the data passed</p>
</dd>
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">FunctionError</span></code></dt><dd><p>Raised if there has been an error with a serverless function.</p>
</dd>
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">ObjectStoreError</span></code></dt><dd><p>Raised if an error accessing an object at a key in the object store occurs</p>
</dd>
</dl>
</section>
<section id="types">
<h3>Types<a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h3>
<p>These are used in conjunction with <code class="docutils literal notranslate"><span class="pre">mypy</span></code> to make type hinting easier.</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">pathType</span></code></p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">multiPathType</span></code></p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">resultsType</span></code></p>
</section>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="index.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">User API</p>
        </div>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022 OpenGHG development team.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>