
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Developer API &#8212; OpenGHG 0+untagged.3.g26b3054 documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/custom.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="User API" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">OpenGHG</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../features.html">
  Features
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../install.html">
  Installation instructions
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../tutorials/index.html">
  Tutorials
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../development/index_devel.html">
  Development
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="index.html">
  User API
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  Developer API
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#modules">
   modules
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#base-class">
     Base class
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-processing">
     Data processing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#datasource">
     Datasource
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#objectstore">
   objectstore
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#util">
   util
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exporting">
     Exporting
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hashing">
     Hashing
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#string-manipulation">
     String manipulation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#time">
     Time
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#iteration">
     Iteration
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#site-checks">
     Site Checks
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="developer-api">
<h1>Developer API<a class="headerlink" href="#developer-api" title="Permalink to this headline">¶</a></h1>
<p>The functions and methods documented in this section are the internal workings of the OpenGHG library. They are subject to change
without warning due to the early stages of development of the project.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Normal users should not use any of the functions shown here directly as they may be removed or their functionality may change.</p>
</div>
<section id="modules">
<h2>modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h2>
<section id="base-class">
<h3>Base class<a class="headerlink" href="#base-class" title="Permalink to this headline">¶</a></h3>
<p>This provides the functionality required by all data storage and processing classes, namely the saving, retrieval and loading
of data from the object store.</p>
<dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseStore</span></code></dt><dd><p>Base class which the other core processing modules inherit</p>
</dd>
</dl>
</section>
<section id="data-processing">
<h3>Data processing<a class="headerlink" href="#data-processing" title="Permalink to this headline">¶</a></h3>
<p>These classes are used for the processing of data by the <code class="docutils literal notranslate"><span class="pre">ObsSurface</span></code> processing class.</p>
<dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">CRANFIELD</span></code></dt><dd><p>For processing data from Cranfield</p>
</dd>
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">CRDS</span></code></dt><dd><p>For processing data from CRDS (cavity ring-down spectroscopy) data from the DECC network.</p>
</dd>
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">EUROCOM</span></code></dt><dd><p>For processing data from the EUROCOM network</p>
</dd>
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">GCWERKS</span></code></dt><dd><p>For processing data in the form expected by the GCWERKS package</p>
</dd>
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">ICOS</span></code></dt><dd><p>For processing data from the ICOS network</p>
</dd>
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">NOAA</span></code></dt><dd><p>For processing data from the NOAA network</p>
</dd>
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">THAMESBARRIER</span></code></dt><dd><p>For processing data from the Thames Barrier measurement sites</p>
</dd>
</dl>
</section>
<section id="datasource">
<h3>Datasource<a class="headerlink" href="#datasource" title="Permalink to this headline">¶</a></h3>
<p>The Datasource is the smallest data provider within the OpenGHG topology. A Datasource represents a data provider such as an instrument
measuring a specific gas at a specific height at a specific site. For an instrument measuring three gas species at an inlet height of 100m
at a site we would have three Datasources.</p>
<dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">Datasource</span></code></dt><dd><p>Handles the storage of data, metadata and version information for measurements</p>
</dd>
</dl>
</section>
</section>
<section id="objectstore">
<h2>objectstore<a class="headerlink" href="#objectstore" title="Permalink to this headline">¶</a></h2>
<p>These functions handle the storage of data in the object store, in JSON or binary format. Each object and piece of data in the
object store is stored at a specific <code class="docutils literal notranslate"><span class="pre">key</span></code>, which can be thought of as the address of the data. The data is stored
in a <code class="docutils literal notranslate"><span class="pre">bucket</span></code> which in the cloud is a section of the OpenGHG object store. Locally a <code class="docutils literal notranslate"><span class="pre">bucket</span></code> is just a normal
directory in the user’s filesystem specific by the <code class="docutils literal notranslate"><span class="pre">OPENGHG_PATH</span></code> environment variable.</p>
<dl class="simple">
<dt><a class="reference internal" href="devapi_modules.html#openghg.objectstore.delete_object" title="openghg.objectstore.delete_object"><code class="xref py py-func docutils literal notranslate"><span class="pre">delete_object()</span></code></a></dt><dd><p>Delete an object in the store</p>
</dd>
<dt><a class="reference internal" href="devapi_modules.html#openghg.objectstore.exists" title="openghg.objectstore.exists"><code class="xref py py-func docutils literal notranslate"><span class="pre">exists()</span></code></a></dt><dd><p>Check if an object exists at that key</p>
</dd>
<dt><a class="reference internal" href="devapi_modules.html#openghg.objectstore.get_bucket" title="openghg.objectstore.get_bucket"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_bucket()</span></code></a></dt><dd><p>Get path to bucket</p>
</dd>
<dt><a class="reference internal" href="devapi_modules.html#openghg.objectstore.get_local_bucket" title="openghg.objectstore.get_local_bucket"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_local_bucket()</span></code></a></dt><dd><p>Get path to local bucket</p>
</dd>
<dt><a class="reference internal" href="devapi_modules.html#openghg.objectstore.get_object" title="openghg.objectstore.get_object"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_object()</span></code></a></dt><dd><p>Get object at given key</p>
</dd>
<dt><a class="reference internal" href="devapi_modules.html#openghg.objectstore.get_object_from_json" title="openghg.objectstore.get_object_from_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_object_from_json()</span></code></a></dt><dd><p>Get object from JSON</p>
</dd>
<dt><a class="reference internal" href="devapi_modules.html#openghg.objectstore.set_object_from_file" title="openghg.objectstore.set_object_from_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_object_from_file()</span></code></a></dt><dd><p>Set data at a key from a given filepath</p>
</dd>
<dt><a class="reference internal" href="devapi_modules.html#openghg.objectstore.set_object_from_json" title="openghg.objectstore.set_object_from_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_object_from_json()</span></code></a></dt><dd><p>Set data at a key from JSON</p>
</dd>
</dl>
</section>
<section id="util">
<h2>util<a class="headerlink" href="#util" title="Permalink to this headline">¶</a></h2>
<p>This module contains all the helper functions used throughout OpenGHG.</p>
<section id="exporting">
<h3>Exporting<a class="headerlink" href="#exporting" title="Permalink to this headline">¶</a></h3>
<p>These are used to export data to a format readable by the <a class="reference external" href="https://github.com/openghg/dashboard">OpenGHG data dashboard</a>.</p>
<dl class="simple">
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">to_dashboard()</span></code></dt><dd><p>Export timeseries data to JSON</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">to_dashboard_mobile()</span></code></dt><dd><p>Export mobile observations data to JSON</p>
</dd>
</dl>
</section>
<section id="hashing">
<h3>Hashing<a class="headerlink" href="#hashing" title="Permalink to this headline">¶</a></h3>
<p>These handle hashing of data (usually with SHA1)</p>
<dl class="simple">
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">hash_file()</span></code></dt><dd><p>Calculate the SHA1 hash of a file</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">hash_string()</span></code></dt><dd><p>Calculate the SHA1 hash of a UTF-8 encoded string</p>
</dd>
</dl>
</section>
<section id="string-manipulation">
<h3>String manipulation<a class="headerlink" href="#string-manipulation" title="Permalink to this headline">¶</a></h3>
<p>String cleaning and formatting functions</p>
<dl class="simple">
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">clean_string()</span></code></dt><dd><p>Return a lowercase cleaned string</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">to_lowercase()</span></code></dt><dd><p>Converts a string to lowercase</p>
</dd>
</dl>
</section>
<section id="time">
<h3>Time<a class="headerlink" href="#time" title="Permalink to this headline">¶</a></h3>
<p>Helpers to deal with all things datetime.</p>
<dl class="simple">
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">timestamp_tzaware()</span></code></dt><dd><p>Create a Timestamp with a UTC timezone</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">timestamp_now()</span></code></dt><dd><p>Create a timezone aware timestamp for now</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">timestamp_epoch()</span></code></dt><dd><p>Create a timezone aware timestamp for the UNIX epoch (1970-01-01)</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">daterange_from_str()</span></code></dt><dd><p>Create a daterange from two timestamp strings</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">daterange_to_str()</span></code></dt><dd><p>Convert a daterange to string</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">create_daterange_str()</span></code></dt><dd><p>Create a daterange string from two timestamps or strings</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">create_daterange()</span></code></dt><dd><p>Create a pandas DatetimeIndex from two timestamps</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">daterange_overlap()</span></code></dt><dd><p>Check if two dateranges overlap</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">combine_dateranges()</span></code></dt><dd><p>Combine a list of dateranges</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">split_daterange_str()</span></code></dt><dd><p>Split a daterange string to the component start and end Timestamps</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">closest_daterange()</span></code></dt><dd><p>Finds the closest daterange in a list of dateranges</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">valid_daterange()</span></code></dt><dd><p>Check if the passed daterange is valid</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">find_daterange_gaps()</span></code></dt><dd><p>Find the gaps in a list of dateranges</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">trim_daterange()</span></code></dt><dd><p>Removes overlapping dates from to_trim</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">split_encompassed_daterange()</span></code></dt><dd><p>Checks if one of the passed dateranges contains the other, if so, then
split the larger daterange into three sections.</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">daterange_contains()</span></code></dt><dd><p>Checks if one daterange contains another</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">sanitise_daterange()</span></code></dt><dd><p>Make sure the daterange is correct and return tzaware daterange.</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">check_nan()</span></code></dt><dd><p>Check if the given value is NaN, is so return an NA string</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">check_date()</span></code></dt><dd><p>Check if the passed string is a valid date or not, if not returns NA</p>
</dd>
</dl>
</section>
<section id="iteration">
<h3>Iteration<a class="headerlink" href="#iteration" title="Permalink to this headline">¶</a></h3>
<p>Our own personal <code class="xref py py-obj docutils literal notranslate"><span class="pre">itertools</span></code></p>
<dl class="simple">
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">pairwise()</span></code></dt><dd><p>Return a zip of an iterable where a is the iterable
and b is the iterable advanced one step.</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">unanimous()</span></code></dt><dd><p>Checks that all values in an iterable object are the same</p>
</dd>
</dl>
</section>
<section id="site-checks">
<h3>Site Checks<a class="headerlink" href="#site-checks" title="Permalink to this headline">¶</a></h3>
<p>These perform checks to ensure data processed for each site is correct</p>
<dl class="simple">
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">valid_site()</span></code></dt><dd><p>Check if the passed site is a valid one</p>
</dd>
<dt><code class="xref py py-func docutils literal notranslate"><span class="pre">multiple_inlets()</span></code></dt><dd><p>Check if the passed site has more than one inlet</p>
</dd>
</dl>
</section>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="index.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">User API</p>
        </div>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022 OpenGHG development team.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.3.2.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>