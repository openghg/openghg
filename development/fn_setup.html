
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Fn setup &#8212; OpenGHG 0+untagged.1.gdcf8fd8.dirty documentation</title>
    
    <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/pydata-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
    <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/custom.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">OpenGHG</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../features.html">
  Features
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../install.html">
  Installation instructions
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../tutorials/index.html">
  Tutorials
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="index_devel.html">
  Development
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api/index.html">
  User API
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api/index_devapi.html">
  Developer API
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#server">
   Server
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installing-docker">
   Installing Docker
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install-fn">
   Install Fn
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setup-nginx-proxy">
   Setup NGINX proxy
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setup-firewall-rules">
   Setup Firewall Rules
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#get-a-letsencrypt-certificate-with-certbot">
   Get a LetsEncrypt certificate with Certbot
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#deploy-fn-functions">
   Deploy Fn Functions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#manually-triggering-functions">
   Manually Triggering Functions
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="fn-setup">
<h1>Fn setup<a class="headerlink" href="#fn-setup" title="Permalink to this headline">¶</a></h1>
<p>This guide will help you get a basic Fn server setup and ready to be given functions for invocation. In future tutorials
we will cover getting Fn setup using Kubernetes.</p>
<section id="server">
<h2>Server<a class="headerlink" href="#server" title="Permalink to this headline">¶</a></h2>
<p>In this tutorial we’ll be using a virtual machine cloud instance on the Oracle cloud, but any cloud provider
will work. Although we’ll use a CentOS 8 image on our VM any Docker capable image should work, though setup steps will difference
from those given here.</p>
</section>
<section id="installing-docker">
<h2>Installing Docker<a class="headerlink" href="#installing-docker" title="Permalink to this headline">¶</a></h2>
<p>We’ll install Docker from their repos for CentOS. For the complete
installation instructions please see the <a class="reference external" href="https://docs.docker.com/engine/install/centos/">Docker documentation</a>
but we will summarise the steps below.</p>
<p>First set up the repository</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo yum install -y yum-utils

sudo yum-config-manager --add-repo <span class="se">\</span>
    https://download.docker.com/linux/centos/docker-ce.repo
</pre></div>
</div>
<p>Then we can install Docker Engine and containerd</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo yum install -y docker-ce docker-ce-cli containerd.io
</pre></div>
</div>
<p>Note that you may have to accept the GPG key, please check that it matches the one given in the
<a class="reference external" href="https://docs.docker.com/engine/install/centos/">installation instructions</a>.</p>
<p>Next we must start the docker services</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo systemctl start docker
</pre></div>
</div>
<p>Then check Docker is working correctly</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo docker run hello-world
</pre></div>
</div>
<p>As Fn does not currently work with rootless docker we need to add our current user to the <code class="docutils literal notranslate"><span class="pre">docker</span></code> group.
Note that this does come with security implications which
are <em class="xref py py-obj">outlined here</em>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo usermod -aG docker &lt;username&gt;
</pre></div>
</div>
</section>
<section id="install-fn">
<h2>Install Fn<a class="headerlink" href="#install-fn" title="Permalink to this headline">¶</a></h2>
<p>We can now install Fn</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget -O install_fn.sh https://raw.githubusercontent.com/fnproject/cli/master/install
<span class="nb">echo</span> a02456b8c8aba8b727d35f704cbca9234e40d2731f200b94abeceb9467973a13 install_fn.sh <span class="p">|</span> sha256sum -c
<span class="c1"># This should have returned install_fn.sh: OK</span>
<span class="c1"># If not carefully check the bash script</span>
bash install_fn.sh
</pre></div>
</div>
<p>Note: if</p>
<p>Then start Fn to make sure everything runs correctly. On first start some images will be downloaded.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>fn start
</pre></div>
</div>
</section>
<section id="setup-nginx-proxy">
<h2>Setup NGINX proxy<a class="headerlink" href="#setup-nginx-proxy" title="Permalink to this headline">¶</a></h2>
<p>So that we’re not exposing Fn directly to the internet we’ll use nginx as a reverse-proxy. First install nginx
using</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo yum -y install nginx
</pre></div>
</div>
<p>Next we create a server config file for our reverse proxy in <code class="docutils literal notranslate"><span class="pre">/etc/nginx/conf.d/fn_proxy.conf</span></code>.</p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">    </span><span class="k">server</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 2</span><span class="w">        </span><span class="kn">listen</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="s">default_server</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 3</span><span class="w">        </span><span class="kn">listen</span><span class="w"> </span><span class="s">[::]:80</span><span class="w"> </span><span class="s">default_server</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">        </span><span class="kn">server_name</span><span class="w"> </span><span class="s">fn.openghg.org</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="w">        </span><span class="kn">location</span><span class="w"> </span><span class="s">/</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="w">        </span><span class="kn">location</span><span class="w"> </span><span class="s">/t</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">                </span><span class="kn">proxy_pass</span><span class="w"> </span><span class="s">http://localhost:8080/t/openghg</span><span class="p">;</span><span class="w"></span>
<span class="linenos">10</span><span class="w">                </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">Host</span><span class="w"> </span><span class="nv">$host</span><span class="p">;</span><span class="w"></span>
<span class="linenos">11</span><span class="w">                </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Real-IP</span><span class="w"> </span><span class="nv">$remote_addr</span><span class="p">;</span><span class="w"></span>
<span class="linenos">12</span><span class="w">                </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Forwarded-For</span><span class="w"> </span><span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span><span class="w"></span>
<span class="linenos">13</span><span class="w">                </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">X-Forwarded-Proto</span><span class="w"> </span><span class="s">https</span><span class="p">;</span><span class="w"></span>
<span class="linenos">14</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">15</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Then we want to disable the default config by setting <code class="docutils literal notranslate"><span class="pre">/etc/nginx/nginx.conf</span></code>.
It might be worth copying up your default <code class="docutils literal notranslate"><span class="pre">nginx.conf</span></code> to <code class="docutils literal notranslate"><span class="pre">nginx.conf.bak</span></code> before editing
for easy roll-back and comparison.</p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">    </span><span class="k">user</span><span class="w"> </span><span class="s">nginx</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 2</span><span class="w">    </span><span class="k">worker_processes</span><span class="w"> </span><span class="s">auto</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 3</span><span class="w">    </span><span class="k">error_log</span><span class="w"> </span><span class="s">/var/log/nginx/error.log</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">    </span><span class="k">pid</span><span class="w"> </span><span class="s">/run/nginx.pid</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="w">    </span><span class="k">include</span><span class="w"> </span><span class="n">/usr/share/nginx/modules/*.conf</span>;<span class="w"></span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="w">    </span><span class="k">events</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">        </span><span class="kn">worker_connections</span><span class="w"> </span><span class="mi">1024</span><span class="p">;</span><span class="w"></span>
<span class="linenos">10</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="w">    </span><span class="k">http</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos">13</span><span class="w">        </span><span class="kn">log_format</span><span class="w">  </span><span class="s">main</span><span class="w">  </span><span class="s">&#39;</span><span class="nv">$remote_addr</span><span class="w"> </span><span class="s">-</span><span class="w"> </span><span class="nv">$remote_user</span><span class="w"> </span><span class="s">[</span><span class="nv">$time_local]</span><span class="w"> </span><span class="s">&quot;</span><span class="nv">$request&quot;</span><span class="w"> </span><span class="s">&#39;</span><span class="w"></span>
<span class="linenos">14</span><span class="w">                        </span><span class="s">&#39;</span><span class="nv">$status</span><span class="w"> </span><span class="nv">$body_bytes_sent</span><span class="w"> </span><span class="s">&quot;</span><span class="nv">$http_referer&quot;</span><span class="w"> </span><span class="s">&#39;</span><span class="w"></span>
<span class="linenos">15</span><span class="w">                        </span><span class="s">&#39;&quot;</span><span class="nv">$http_user_agent&quot;</span><span class="w"> </span><span class="s">&quot;</span><span class="nv">$http_x_forwarded_for&quot;&#39;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="w">        </span><span class="kn">access_log</span><span class="w">  </span><span class="s">/var/log/nginx/access.log</span><span class="w">  </span><span class="s">main</span><span class="p">;</span><span class="w"></span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="w">        </span><span class="kn">sendfile</span><span class="w">            </span><span class="no">on</span><span class="p">;</span><span class="w"></span>
<span class="linenos">20</span><span class="w">        </span><span class="kn">tcp_nopush</span><span class="w">          </span><span class="no">on</span><span class="p">;</span><span class="w"></span>
<span class="linenos">21</span><span class="w">        </span><span class="kn">tcp_nodelay</span><span class="w">         </span><span class="no">on</span><span class="p">;</span><span class="w"></span>
<span class="linenos">22</span><span class="w">        </span><span class="kn">keepalive_timeout</span><span class="w">   </span><span class="mi">65</span><span class="p">;</span><span class="w"></span>
<span class="linenos">23</span><span class="w">        </span><span class="kn">types_hash_max_size</span><span class="w"> </span><span class="mi">2048</span><span class="p">;</span><span class="w"></span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="w">        </span><span class="kn">include</span><span class="w">             </span><span class="s">/etc/nginx/mime.types</span><span class="p">;</span><span class="w"></span>
<span class="linenos">26</span><span class="w">        </span><span class="kn">default_type</span><span class="w">        </span><span class="s">application/octet-stream</span><span class="p">;</span><span class="w"></span>
<span class="linenos">27</span><span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="s">/etc/nginx/conf.d/*.conf</span><span class="p">;</span><span class="w"></span>
<span class="linenos">28</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Then we can check that our configuration setup is valid by doing</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo nginx -t
</pre></div>
</div>
<p>Then we start and enable nginx</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo systemctl start nginx
sudo systemctl <span class="nb">enable</span> nginx
</pre></div>
</div>
</section>
<section id="setup-firewall-rules">
<h2>Setup Firewall Rules<a class="headerlink" href="#setup-firewall-rules" title="Permalink to this headline">¶</a></h2>
<p>First we enable and then start the <code class="docutils literal notranslate"><span class="pre">firewalld</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo systemctl <span class="nb">enable</span> firewalld
sudo systemctl start firewalld
</pre></div>
</div>
<p>To allow access from the outside world we need to setup rules to allow <code class="docutils literal notranslate"><span class="pre">ssh</span></code>, <code class="docutils literal notranslate"><span class="pre">http</span></code> and <code class="docutils literal notranslate"><span class="pre">https</span></code> traffic.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo firewall-cmd --zone<span class="o">=</span>public --add-service<span class="o">=</span>ssh --permanent
sudo firewall-cmd --zone<span class="o">=</span>public --add-service<span class="o">=</span>https --permanent
sudo firewall-cmd --zone<span class="o">=</span>public --add-service<span class="o">=</span>http --permanent
</pre></div>
</div>
<p>Note that we perform the command and then the same command again with the <code class="docutils literal notranslate"><span class="pre">--permanent</span></code> argument to add
the rule first to the current session and then to the permanent rule-set.</p>
<p>We also need to tell SELinux to allow HTTP worker_connections</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo setsebool -P httpd_can_network_connect <span class="m">1</span>
</pre></div>
</div>
<p>On a CentOS 8 VM on the Oracle Cloud you may need to modify some <em class="xref py py-obj">iptables</em> rules to allow any connections to be made to your
server.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo iptables -L INPUT --line-numbers

Chain INPUT <span class="o">(</span>policy ACCEPT<span class="o">)</span>
num  target     prot opt <span class="nb">source</span>               destination
<span class="m">1</span>    ACCEPT     all  --  anywhere             anywhere             state RELATED,ESTABLISHED
<span class="m">2</span>    ACCEPT     icmp --  anywhere             anywhere
<span class="m">3</span>    ACCEPT     all  --  anywhere             anywhere
<span class="m">4</span>    ACCEPT     tcp  --  anywhere             anywhere             state NEW tcp dpt:ssh
<span class="m">5</span>    REJECT     all  --  anywhere             anywhere             reject-with icmp-host-prohibited
</pre></div>
</div>
<p>You may need to remove the 5th rule in this set</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo iptables -D INPUT <span class="m">5</span>
</pre></div>
</div>
</section>
<section id="get-a-letsencrypt-certificate-with-certbot">
<h2>Get a LetsEncrypt certificate with Certbot<a class="headerlink" href="#get-a-letsencrypt-certificate-with-certbot" title="Permalink to this headline">¶</a></h2>
<p>To get a LetsEncrypt certificate for https we’ll use Certbot. First, make sure you’ve setup the subdomain for the
server and pointed it at the IP address of the server. Then follow the commands below.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo dnf install epel-release
sudo dnf install certbot python3-certbot-nginx
</pre></div>
</div>
<p>Then we can setup get the certificate using <code class="docutils literal notranslate"><span class="pre">certbot</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo certbot --nginx -d fn.openghg.org
</pre></div>
</div>
<p>As <code class="docutils literal notranslate"><span class="pre">certbot</span></code> will update our our <em class="xref py py-obj">nginx</em> configuration files we need to do</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo systemctl restart nginx
</pre></div>
</div>
<p>We can also set <code class="docutils literal notranslate"><span class="pre">certbot</span></code> to renew our certificates automatically using the following command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">SLEEPTIME</span><span class="o">=</span><span class="k">$(</span>awk <span class="s1">&#39;BEGIN{srand(); print int(rand()*(3600+1))}&#39;</span><span class="k">)</span><span class="p">;</span> <span class="nb">echo</span> <span class="s2">&quot;0 0,12 * * * root sleep </span><span class="nv">$SLEEPTIME</span><span class="s2"> &amp;&amp; certbot renew -q&quot;</span> <span class="p">|</span> sudo tee -a /etc/crontab &gt; /dev/null
</pre></div>
</div>
<p>This adds a cron job to <code class="docutils literal notranslate"><span class="pre">/etc/crontab</span></code>.</p>
</section>
<section id="deploy-fn-functions">
<h2>Deploy Fn Functions<a class="headerlink" href="#deploy-fn-functions" title="Permalink to this headline">¶</a></h2>
<p>We now want to deploy our functions. We’ll first need to make sure we’ve got <code class="docutils literal notranslate"><span class="pre">git</span></code> and <code class="docutils literal notranslate"><span class="pre">python</span></code> installed.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo yum install python38 git
</pre></div>
</div>
<p>Next clone the <code class="docutils literal notranslate"><span class="pre">openghg</span></code> repository</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/openghg/openghg.git
</pre></div>
</div>
<p>Then move into the <code class="docutils literal notranslate"><span class="pre">openghg/docker</span></code> folder and run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 build_deploy.py --build-base
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--build-base</span></code> argument tells the build script to build the base image. In subsequent deployments we won’t need to run this
step unless our dependencies change.</p>
<p>If you want to build the Docker images without using the cache you can pass the <code class="docutils literal notranslate"><span class="pre">--nocache</span></code> argument to <code class="docutils literal notranslate"><span class="pre">build_deploy.py</span></code> like so:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 build_deploy.py --build-base --nocache
</pre></div>
</div>
</section>
<section id="manually-triggering-functions">
<h2>Manually Triggering Functions<a class="headerlink" href="#manually-triggering-functions" title="Permalink to this headline">¶</a></h2>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022 OpenGHG development team.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>